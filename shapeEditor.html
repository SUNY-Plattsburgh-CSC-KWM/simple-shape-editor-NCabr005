<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Basic SVG Shape Editor</title>
</head>
<body>
  <h1 id="message">Click Create, Move, or Delete</h1>

  <svg id="canvas" style="width: 800px; height: 600px; border: 1px solid black;">
    <!-- Simple command buttons -->
    <g id="buttonCreate">
      <rect x="10" y="10" width="60" height="25" fill="lightgreen" stroke="black"/>
      <text x="40" y="26" text-anchor="middle">Create</text>
    </g>
    <g id="buttonMove">
      <rect x="80" y="10" width="60" height="25" fill="lightblue" stroke="black"/>
      <text x="110" y="26" text-anchor="middle">Move</text>
    </g>
    <g id="buttonDelete">
      <rect x="150" y="10" width="60" height="25" fill="lightcoral" stroke="black"/>
      <text x="180" y="26" text-anchor="middle">Delete</text>
    </g>
  </svg>

  <script>
    // BASIC SVG DOM MANIPULATION - Create, Move, Delete
    
    // Get the SVG canvas
    const svg = document.getElementById('canvas');
    const message = document.getElementById('message');

    // Simple variables
    let mode = 'create';     // What we're doing: 'create', 'move', or 'delete'
    let moveShape = null;    // Which shape we're moving
    let shapeCounter = 0;    // To give shapes unique IDs

    // Simple message function
    function showMessage(text) {
      message.textContent = text;
      console.log('Message updated to:', text);
    }

    // 1. CREATE: Make a new rectangle and add it to the SVG
    function createRectangle(x, y) {
      // CREATE a new SVG rectangle element
      const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
      
      // SET its attributes
      rect.setAttribute('x', x - 50);
      rect.setAttribute('y', y - 30);
      rect.setAttribute('width', 100);
      rect.setAttribute('height', 60);
      rect.setAttribute('fill', 'lightblue');
      rect.setAttribute('stroke', 'black');
      rect.setAttribute('id', 'shape' + shapeCounter);
      
      // ADD it to the SVG
      svg.appendChild(rect);
      
      shapeCounter++;
      showMessage('Rectangle created! Click Move or Delete to do more.');
    }

    // 2. MOVE: Change the position of a shape by changing its attributes
    function moveShapeToPosition(shape, x, y) {
      if (shape.tagName === 'rect') {
        // For rectangles, change the x and y attributes
        shape.setAttribute('x', x - 50);
        shape.setAttribute('y', y - 30);
      } else if (shape.tagName === 'circle') {
        // For circles, change cx and cy attributes
        shape.setAttribute('cx', x);
        shape.setAttribute('cy', y);
      }
      showMessage('Shape moved!');
    }

    // 3. DELETE: Remove a shape from the SVG
    function deleteShapeFromSVG(shape) {
      // REMOVE the element from the SVG
      svg.removeChild(shape);
      showMessage('Shape deleted!');
    }

    // Handle clicks on the SVG
    svg.addEventListener('click', function(event) {
      const clickedElement = event.target;
      
      // Check which button was clicked (simple way!)
      const createButton = document.getElementById('buttonCreate');
      const moveButton = document.getElementById('buttonMove');
      const deleteButton = document.getElementById('buttonDelete');
      
      if (createButton.contains(clickedElement)) {
        mode = 'create';
        showMessage('CREATE mode - click anywhere to create a rectangle');
        console.log('Create button clicked!');
        return;
      }
      
      if (moveButton.contains(clickedElement)) {
        mode = 'move';
        moveShape = null;
        showMessage('MOVE mode - click a shape to select it');
        console.log('Move button clicked!');
        return;
      }
      
      if (deleteButton.contains(clickedElement)) {
        mode = 'delete';
        showMessage('DELETE mode - click a shape to delete it');
        console.log('Delete button clicked!');
        return;
      }
      
      // Debug: show what was actually clicked
      console.log('Clicked element:', clickedElement.tagName, clickedElement.id);
      
      // Handle clicks on the canvas based on current mode
      if (mode === 'create') {
        // CREATE: Make a new rectangle where they clicked
        createRectangle(event.offsetX, event.offsetY);
      }
      
      else if (mode === 'move') {
        // MOVE: Two steps - select shape, then move it
        if (moveShape === null) {
          // First click: select a shape
          if (clickedElement.tagName === 'rect' || clickedElement.tagName === 'circle') {
            if (clickedElement.id.startsWith('shape')) {
              moveShape = clickedElement;
              clickedElement.setAttribute('stroke', 'red');
              clickedElement.setAttribute('stroke-width', '3');
              showMessage('Shape selected - now click where you want to move it');
            }
          }
        } else {
          // Second click: move the selected shape
          moveShapeToPosition(moveShape, event.offsetX, event.offsetY);
          moveShape.setAttribute('stroke', 'black');
          moveShape.setAttribute('stroke-width', '1');
          moveShape = null;
        }
      }
      
      else if (mode === 'delete') {
        // DELETE: Remove the clicked shape
        if (clickedElement.tagName === 'rect' || clickedElement.tagName === 'circle') {
          if (clickedElement.id.startsWith('shape')) {
            deleteShapeFromSVG(clickedElement);
          }
        }
      }
    });
  </script>
</body>
</html>